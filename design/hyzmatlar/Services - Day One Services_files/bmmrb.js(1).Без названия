!function(e){"use strict";function s(e,s){var r=[],n=!1;return jQuery.each(e.serializeArray()||{},function(e,i){"lists[]"===i.name?(r.push(i.value),n=!0):s["esfpx_"+i.name]=i.value}),n&&(s["esfpx_lists[]"]=r),s}function r(s,r){var n=s.status,i="success";"ERROR"===n&&(i="error");var t=s.message_text,u=e(r).next(".es_subscription_message");u.attr("class","es_subscription_message "+i),u.html(t);var a={detail:{es_response:i,msg:t},bubbles:!0,cancelable:!0};jQuery(r).trigger("es_response",[a])}function n(n,i){var i=i||!1,t={};t=s(n,t),t.es="subscribe",t.action="es_add_subscriber";var u=es_data.es_ajax_url;return jQuery(n).find("#spinner-image").show(),e.ajax({type:"POST",url:u,data:t,dataType:"json",success:function(e){i||(e&&"undefined"!=typeof e.status&&"SUCCESS"===e.status?(jQuery(n).slideUp("slow"),jQuery(n).hide()):jQuery(n).find("#spinner-image").hide()),jQuery(window).trigger("es.send_response",[jQuery(n),e]),r(e,n)},error:function(e){jQuery(n).find("#spinner-image").hide(),console.log(e,"error")}}),!1}e(document).ready(function(){e(document).on("submit",".es_subscription_form",function(s){s.preventDefault();var r=e(this);n(r)}),jQuery(window).on("init.icegram",function(s,r){"undefined"!=typeof r&&"undefined"!=typeof r.messages&&jQuery('.icegram .es_shortcode_form, .icegram form[data-source="ig-es"]').each(function(s,r){jQuery(r).bind("submit",function(s){s.preventDefault();var r=e(this);n(r,!0)})})})})}(jQuery);